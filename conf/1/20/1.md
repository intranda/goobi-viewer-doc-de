# 1.20.1 Haupt Inhaltsverzeichnis

Das Inhaltsverzeichnis wirdin der Sektion `<toc>` konfiguriert:

{% tabs %}
{% tab title="config_viewer.xml" %}
```markup
<toc>
    <volumeSortFields>
        <template name="_DEFAULT">
            <field order="asc">CURRENTNOSORT</field>
        </template>
        <template name="Periodical" groupBy=“YEAR“>
            <field order="desc">CURRENTNOSORT</field>
        </template>
    </volumeSortFields>

    <labelConfig>
        <template name="_DEFAULT">
            <metadata value="{DOCSTRCT}{MD_TITLE}">
                <param type="field" key="DOCSTRCT" suffix=":_SPACE_" />
                <param type="field" key="MD_TITLE" altKey="LABEL" />
            </metadata>
        </template>
        <template name="_GROUPS">
            <metadata label="" value="{LABEL}{MD_SERIESDISPLAYORDER}">
                <param type="translatedfield" key="LABEL" />
                <param type="field" key="MD_SERIESDISPLAYORDER" prefix="_SPACE_(" suffix=")" />
            </metadata>
        </template>
    </labelConfig>
    
    <titleBarLabel>
        <template name="_DEFAULT">
            <displayAnchorTitle>false</displayAnchorTitle>
	   		</template>
        <template name="volume">
            <displayAnchorTitle prefix="" suffix="_SPACE_">true</displayAnchorTitle>
	   		</template>
	   </titleBarLabel>

    <tocAnchorGroupElementsPerPage>10</tocAnchorGroupElementsPerPage>

    <recordGroupIdentifierFields>
        <field>GROUPID_SERIES</field>
        <field>GROUPID_CONVOLUTE</field>
    </recordGroupIdentifierFields>

    <ancestorIdentifierFields listSiblingRecords="true">
        <field>PI_PARENT</field>
    </ancestorIdentifierFields>

    <useTreeView showDocStructs="_ALL">false</useTreeView>
    
    <tocIndentation>20<tocIndentation>
</toc>
```
{% endtab %}
{% endtabs %}

| **Option**                        | Beschreibung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **volumeSortFields**              | Sortierung von Bänden im Inhaltsverzeichnis eines mehrbändigen Werks. Hier können über Templates (analog zur Metadaten-Konfiguration) abweichende Konfigurationen für bestimmte Anchor-Strukturtypen definiert werden. Ist keine spezielle Konfiguration vorhanden, wird das Template `"_DEFAULT"` verwendet. Das optionale Attribut "`groupBy`" gruppiert die Bände in einzelne Blöcke nach einem Solr-Metadatenfeld (etwa Jahrgänge einer Zeitschrift). Das hier konfigurierte Feld sollte vorzugsweise nicht multivalued sein. Falls die Gruppen ebenfalls sortiert werden sollen, muss das konfigurierte Gruppierungsfeld auch als Sortierfeld  für diese Template konfiguriert sein (das heißt als Unterelement `<field>` innerhalb des Templates). Die definierten `<field>`-Elemente werden in der angegebenen Reihenfolge zur Solr-Query hinzugefügt, das heißt es wird primär nach dem Feld im ersten `<field>`-Element sortiert, gleichwertige Treffer untereinander nach dem zweiten, etc. Über das optionale Attribut order kann die Sortierung auf Wunsch absteigend erfolgen (`desc`). Standardwert ist `asc`.                                                                                                                                                                                                                                                                                                                                                                                                        |
| **labelConfig**                   | <p>Konfiguration von Labels im Inhaltsverzeichnis. Hier können über Templates (analog zur Metadaten-Konfiguration) abweichende Konfigurationen für bestimmte Strukturtypen definiert werden. Ist keine spezielle Konfiguration vorhanden, wird das Template <code>_DEFAULT</code> verwendet. Das spezielle Template <code>_GROUPS</code> wird für die Konfiguration des Wurzelelements einer abstrakten Gruppe (etwa einer Bandserie) verwendet.</p><p></p><p>Das Attribut <code>metadata/@value</code> definiert einen Master Value, der Platzhalter enthalten kann, die durch die Werte aus den <code>param</code>-Elementen ersetzt werden. Anders als bei Metadaten-Konfigurationen werden die Platzhalter hier nicht mit einer Zählung versehen, sondern müssen so heißen, wie die entsprechenden Werte in <code>param/@key</code>. In <code>param/@key</code> können sowohl Indexfelder als auch direkt Message Keys verwendet werden (im letzteren Fall muss sinnvollerweise immer <code>type="translatedfield"</code> konfiguriert werden).</p><p></p><p>Optional kann das Attribut <code>param/@altKey</code> definiert werden. Es wird als Fallback für fehlende Werte aus <code>param/@key</code> verwendet und funktioniert ansonsten identisch.</p><p></p><p>Die optionalen Attribute <code>prefix</code> und <code>suffix</code> können hier zusätzlich durch die automatische Übersetzung behandelt werden. Hierfür müssen entsprechende Message Keys definiert und als Werte dieser Attribute verwendet werden.</p> |
| **titleBarLabel**                 | <p>Konfiguration für die Anzeige des Titels eines geöffneten Werkes. Hier können über Templates (analog zur Metadaten-Konfiguration) abweichende Konfigurationen für bestimmte Strukturtypen definiert werden. Ist keine spezielle Konfiguration vorhanden, wird das Template <code>"_DEFAULT"</code> verwendet.</p><p>Grundsätzlich ist der Titel eines Werkes der Titel des zugehörigen Inhaltsverzeichnis-Eintrages. Ist in einem template <code>displayAnchorTitle</code> auf <code>true</code> gesetzt, wird diesem Titel der Titel des übergeordneten Werkes vorangestellt falls vorhanden. Mit den Attributen on <code>displayAnchorTitle</code> <code>prefix</code> und <code>suffix</code> kann dem Titel des übergeordneten Werkes ein statischer Text vor- beziehungsweise nachgestellt werden.</p><p>In der obigen Beispielkonfiguration werden nur Zeitschriftenausgaben mit dem Titel der übergeordneten Zeitschrift angereichert, lediglich getrennt durch ein Leerzeichen.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **tocAnchorGroupElementsPerPage** | Bei Gesamtwerken und Gruppen mit vielen Bänden kann der Aufbau der Bandauflistung sehr lange dauern. Hier gibt es die Möglichkeit, eine Paginierung der Bandauflistung einzusetzen und die Anzahl der angezeigten Bände pro Seite auf die hier konfigurierte Zahl zu beschränkten. Ist der Wert 0 oder kleiner, ist die Paginierung abgeschaltet.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **recordGroupIdentifierFields**   | Eine Auflistung von Metadatenfeldern, die zur logischen Gruppierung von Werken verwendet werden. Diese fangen in der Regel mit `GROUPID_` an und dienen dazu, Werke, die einen gemeinsamen Feldwert besitzen, als Gruppe aufzulisten (auch wenn diese kein gemeinsames Anchor-Dokument besitzen). Anwendungsbeispiele sind etwa Bandserien oder Konvolute.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **ancestorIdentifierFields**      | <p>Diese Liste von Identifier-Feldern dient dazu, Inhaltsverzeichnis-Hierarchien aus Werken zu erstellen, die entweder feste gemeinsame übergeordnete Struktur (Anchor), oder in einer eher losen Eltern-Kind Beziehung zueinander stehen (Related Item). Dabei besitzen die Child-Dokumente jeweil den Identifier des Parent-Dokuments im entsprechenden Metadatenfeld. Hinweis: Dieser Mechanismus wird auch verwendet, um Bände eines Gesamtwerks (Anchors) aufzulisten. Der hierfür benötigte Eintrag <code>&#x3C;field>PI_PARENT&#x3C;/field></code> kann konfiguriert werden, wird aber bei Nichtvorhandensein implizit zu dieser Liste </p><p>hinzugefügt. Das Attribut <code>listSiblingRecords</code> (wenn auf <code>true</code> gestellt) sorgt dafür, dass andere Werke auf gleicher Ebene (zum Beispiel andere Bände desselben Gesamtwerks) ebenfalls aufgelistet werden, wenn gerade ein Band geöffnet ist.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **useTreeView**                   | Wenn auf `true` gesetzt, wird das Inhaltsverzeichnis als auf- und zuklappbarer Baum dargestellt. Für die Inhaltsverzeichnis-Seite kann zusätzlich konfiguriert werden, ob die Baumstruktur für alle oder nur für bestimmte Dokumenttypen aktiviert werden soll. Die geschieht mit dem Attribut `showDocStructs`, mit Semikolon-separierten Dokumenttypen (zum Beispiel`showDocstructs="Monograph;Manuscript;PeriodicalVolume"`) beziehungsweise mit einem Eintrag für alle Typen (`showDocstructs="_ALL"`).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **tocIndentation**                | Anzahl der Pixel, die zur Einrückung von Kindelementen als Padding verwendet werden. Standardwert ist 20.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
